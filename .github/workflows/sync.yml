# Nama workflow yang akan muncul di tab Actions
name: Automatic Mirror Sync

# Pemicu: Jalankan workflow ini setiap kali ada 'push' ke branch 'main'
on:
  push:
    branches:
      - main # <-- GANTI INI jika nama branch utama Anda 'master' atau lainnya

# Pekerjaan yang harus dilakukan
jobs:
  mirror:
    runs-on: ubuntu-latest
    steps:
      # Langkah 1: Checkout kode dari repositori sumber (Organisasi)
      # Ini penting agar action punya kode untuk di-mirror
      - name: Checkout source repository
        uses: actions/checkout@v4
        with:
          # fetch-depth: 0 memastikan semua riwayat commit ikut tersalin
          fetch-depth: 0

      # Langkah 2: Jalankan proses mirroring ke repositori pribadi
      - name: Mirroring to personal repository
        uses: pixta-dev/repository-mirroring-action@v1
        with:
          # NAMA INPUT YANG BENAR ADALAH 'target_repo_url'
          target_repo_url: 'https://ranggamuktii:${{ secrets.SYNC_PAT }}@github.com/ranggamuktii/genbi-client.git'
          
          # Baris ini opsional, hanya jika Anda menggunakan SSH key
          # ssh_private_key: ${{ secrets.GH_SSH_PRIVATE_KEY }}
